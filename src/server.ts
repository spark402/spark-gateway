import 'dotenv/config';import express from 'express';import helmet from 'helmet';import morgan from 'morgan';import pino from 'pino';import {x402Guard} from './x402/mw.js';const app=express();const log=pino();app.use(helmet());app.use(express.json());app.use(morgan('dev'));app.get('/health',(_req,res)=>res.json({ok:true}));app.get('/api/protected',x402Guard,(_req,res)=>res.json({secret:'ok',ts:Date.now()}));app.listen(Number(process.env.PORT||8787),()=>log.info('gateway up'));
